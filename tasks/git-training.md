# Лабораторная работа по Git

## Git flow

Git flow — это методология ведения проектов с помощью Git, которая предполагает использование определенных веток и процедур для контроля за процессом разработки. Правила Git Flow:

1. Главная ветка называется master или main. В ней не ведётся непосредственная разработка.
2. Ветка для разработки - dev.
3. Для каждой задачи создаётся отдельная ветка с названием этой задачи. Например, если нужно сделать сайт с шапкой и контентом, то ветки будут называться так: header, content.
4. После того как работа над задачей завершена ветка задачи вливается в dev. Например header -> dev.
5. В любой момент можно подтянуть изменения из ветки dev в ветку любой задачи: dev -> content.
6. После того как в ветке dev образуется стабильный протестированный релиз она сливается в ветку main/master.

## Возможные проблемы:

При работе с гитом он могут возникнуть ошибки. Читай их внимательно. Вот некоторые ошибки и способы их решения:

Не получается решить конфликты. Git просит тебя выбрать стратегию решения конфликтов. Введи:

```bash
git config pull.rebase false
```

Git просит тебя назначить твои имя и email:

```bash
git config --global user.name "vasya" #твой ник
git config --global user.email "vasya@mail.ru" #твой email
```

## Работа с Git

1. Делимся на команды по 2 человека.

2. Тимлидер форкает/импортирует репозиторий в интерфейсе GitHub.

Форк отличается от импорта тем, что в случае импорта - это будет ваш личный репозиторий и даже если вы потеряете права к оригинальному репозиторию, то импортированный репозиторий у вас не пропадёт. С форком всё печальнее, когда мы заберём у вас права доступа к репозиториям Эльбруса все ваши форки пропадут.

3. Тимлидер добавляет своего сокомандника в коллабораторы (settings->collaborators в интерфейсе GitHub).

4. Тимлидер создает ветку `dev`. После пуша она появится в интерфейсе GitHub:

```bash
git checkout -b dev
git push
```

В этом моменте гит попросит вас прописать команду `git push -u origin dev`. Надо выполнить эту команду. Её надо будет выполнять только один раз для каждой новой ветки.

5. Каждый студент создает ветку для своей задачи (my-task-branch - имя задачи):

```bash
git checkout -b my-task-branch
```

6. Каждый вносит изменения в ветку своей задачи, делает несколько коммитов и пуш. Пуш - отправляет ваши изменения на сервер GitHub. Пишите максимально понятные сообщения для коммитов (то что написано после -m):

```bash
git add -A
git commit -m "Add feature to my-task-branch"
git push
```

В этом моменте гит попросит вас прописать команду `git push -u origin my-task-branch`. Надо выполнить эту команду. Её надо будет выполнять только один раз для каждой новой ветки.

6. Один из студентов делает пул-реквест в `dev` из интерфейса GitHub (Pull Requests -> New Pull Request).

7. Тимлидер принимает пул-реквест из интерфейса GitHub.

Тут могут возникнуть конфликты. Подробнее о том как их решать описано в пункте 15.

9. Два других студента сливают изменения из `dev` в свои ветки:

```bash
git checkout my-task-branch
git fetch
git merge dev
```

Тут могут возникнуть конфликты. Подробнее о том как их решать описано в пункте 15.

9. Все делают пул-реквесты в `dev` из интерфейса GitHub.

10. Тимлидер принимает пул-реквесты из интерфейса GitHub.

11. Сделать пункты с 6 по 11, но изменения вносить в один и тот же файл, в одну и ту же строку. Потренировать решение конфликтов:

В этом пункте вы столкнётесь с конфликтами.

12. В конце концов тимлидер мерджит все в `master/main`:

```bash
git checkout master
git pull origin dev
```
